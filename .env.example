# LLM API Key (选择你使用的 LLM 提供商)
OPENAI_API_KEY=sk-your-openai-key-here
# OPENAI_BASE_URL=https://api.openai.com/v1

# PostgreSQL 配置（必填）
POSTGRES_CONNECTION_STRING=postgresql://wjbot:wjbot123456@localhost:54320/wjbotexport
# 可选：隔离 schema（默认 public）
POSTGRES_SCHEMA=public

# PostgreSQL 连接池（默认开启，缺少 psycopg_pool 时自动降级）
POSTGRES_POOL_ENABLED=1
POSTGRES_POOL_MIN_SIZE=1
POSTGRES_POOL_MAX_SIZE=10
POSTGRES_POOL_TIMEOUT_SEC=10

# PostgreSQL 自动启动（本地开发用，生产环境设为 0）
PG_AUTOSTART_ENABLED=1
PG_BREW_SERVICE_NAME=postgresql@16

# Codex CLI 自动确认（默认开启，自动审批 Codex 工具弹窗）
CODEX_AUTO_CONFIRM=1

# LLM 配置
LLM_MODEL=gpt-4o
LLM_TEMPERATURE=0.7
LLM_TIMEOUT=120
LLM_MAX_RETRIES=3

# Responses API（GPT-5/Codex 默认自动启用）
# OPENAI_USE_RESPONSES_API=1
# OPENAI_REASONING_EFFORT=high
# OPENAI_RESPONSES_STORE=1
# 可选：启用 previous_response_id 串联（第三方网关 + tools 场景建议先保持 0）
# OPENAI_USE_PREVIOUS_RESPONSE_ID=1
# 可选：绑定持久会话（Conversations API）
# OPENAI_RESPONSES_CONVERSATION_ID=conv_xxx
# 可选：后台模式
# OPENAI_RESPONSES_BACKGROUND=0
# 可选：响应 include 字段（逗号分隔）
# OPENAI_RESPONSES_INCLUDE=
# 可选：文本输出详略级别（low/medium/high）
# OPENAI_RESPONSES_VERBOSITY=medium
# 可选：上下文管理（JSON）
# OPENAI_RESPONSES_CONTEXT_MANAGEMENT=[]

# 第三方中转兼容（默认第三方 base_url 会自动开启输入清洗）
# OPENAI_RESPONSES_SANITIZE_INPUT=1
# OPENAI_RESPONSES_STRIP_INPUT_IDS=1
# OPENAI_RESPONSES_DROP_REASONING_INPUT=1

# Gateway 配置
GATEWAY_TIMEOUT=240
GATEWAY_MAX_ATTEMPTS=2
COMMAND_CARD_TIMEOUT_SEC=240
GATEWAY_MIN_QUALITY_SCORE=25

# 拓扑提案配置
TOPOLOGY_PROPOSAL_ENABLED=1
TOPOLOGY_APPROVAL_TTL_SEC=120
TOPOLOGY_APPROVAL_ARCHIVE_DAYS=30

# Dashboard 配置
DASHBOARD_SSE_SYNC_SEC=5
AUDIT_LOG_LIMIT=100
SYSTEM_LOG_LIMIT=100

# Telegram / iTerm 主控配置（可选）
# TG_BOT_TOKEN=
# TG_CHAT_ID=
# TG_MASTER_TAB_NAME=主agent
# 看门狗（生产推荐）
# TG_WATCHDOG_INTERVAL=60
# TG_WATCHDOG_PROMPT=请继续执行当前任务。如果已完成，请汇报结果。
# TG_WATCHDOG_INCLUDE_MASTER=1
# TG_WATCHDOG_CHECK_WAITING=1
# TG_WATCHDOG_WAITING_READ_LINES=40
# TG_WATCHDOG_WAITING_PROMPT=检测到你在 Waiting for instructions，请继续当前任务；若无任务请回复 READY+agent_id。

# Agent 运行时配置
AGENT_GC_ENABLED=1
AGENT_GC_INTERVAL_SEC=30
AGENT_GC_GENERATION=2
AGENT_MEMORY_WARN_MB=0
# 编排虚拟工作区 (双通道: 虚拟目录 + PG 状态)
ORCHESTRATION_WORKSPACE_ROOT=.agent/workspaces
ORCHESTRATION_WORKSPACE_MAX_FILES=5000
ORCHESTRATION_WORKSPACE_MAX_FILE_BYTES=8388608
ORCHESTRATION_WORKSPACE_MAX_TOTAL_BYTES=268435456
# ACP-BUS 单实例锁（1=启用，0=关闭；MCP/stdio 多会话场景建议 0）
ACP_BUS_SINGLETON_ENABLED=0
# ACP db_execute 开关（1=启用，0=禁用）
AGENT_DB_EXECUTE_ENABLED=1

# 日志级别
LOG_LEVEL=INFO

# 日志轮转（字节）
AUDIT_LOG_MAX_BYTES=5242880
AUDIT_LOG_BACKUP_COUNT=3
SYSTEM_LOG_MAX_BYTES=5242880
SYSTEM_LOG_BACKUP_COUNT=3

# 拓扑配置备份
CONFIG_BACKUP_ENABLED=1
CONFIG_BACKUP_KEEP=50
