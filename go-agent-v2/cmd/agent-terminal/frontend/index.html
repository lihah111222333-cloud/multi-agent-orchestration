<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agent Orchestrator</title>
  <link rel="stylesheet" href="lib/xterm.min.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- 侧栏 -->
  <nav id="sidebar">
    <div class="sidebar-btn active" data-page="terminal">
      <span class="sb-icon">&gt;_</span><span class="sb-label">终端</span>
    </div>
    <div class="sidebar-btn" data-page="agents">
      <span class="sb-icon">A</span><span class="sb-label">Agent</span>
    </div>
    <div class="sidebar-btn" data-page="dags">
      <span class="sb-icon">D</span><span class="sb-label">DAG</span>
    </div>
    <div class="sidebar-btn" data-page="tasks">
      <span class="sb-icon">T</span><span class="sb-label">任务</span>
    </div>
    <div class="sidebar-btn" data-page="skills">
      <span class="sb-icon">S</span><span class="sb-label">技能</span>
    </div>
    <div class="sidebar-btn" data-page="commands">
      <span class="sb-icon">C</span><span class="sb-label">命令</span>
    </div>
    <div class="sidebar-btn" data-page="memory">
      <span class="sb-icon">M</span><span class="sb-label">记忆</span>
    </div>
    <div class="sidebar-spacer"></div>
    <div class="sidebar-btn" data-page="settings">
      <span class="sb-icon">..</span><span class="sb-label">设置</span>
    </div>
  </nav>

  <!-- 主内容区 -->
  <main id="content">
    <!-- Terminal 页 -->
    <section id="page-terminal" class="page active">
      <header id="toolbar">
        <div class="toolbar-left">
          <span class="logo">▸ Agent Terminal</span>
        </div>
        <div class="toolbar-center">
          <label>启动数量</label>
          <input id="batchCount" type="number" value="4" min="1" max="32">
          <button id="btnBatch" class="btn btn-primary">批量启动</button>
          <button id="btnAdd" class="btn btn-secondary">+ 添加</button>
          <button id="btnNewWindow" class="btn btn-secondary">⧉ 新窗口</button>
          <button id="btnReset" class="btn btn-ghost">网格重置</button>
        </div>
        <div class="toolbar-right">
          <span id="agentCount">0 Agents</span>
        </div>
      </header>
      <main id="grid"></main>
    </section>

    <!-- Agents 页 -->
    <section id="page-agents" class="page">
      <div class="panel-header">
        <div class="ph-bar"></div>
        <div class="ph-text">
          <h2>Agent 状态</h2>
        </div>
      </div>
      <div class="panel-body" id="agentsBody">
        <div class="empty-state">
          <div class="es-icon">A</div>
          <h3>暂无 Agent</h3>
          <p>启动 Agent 后将在此显示</p>
        </div>
      </div>
    </section>

    <!-- DAGs 页 -->
    <section id="page-dags" class="page">
      <div class="panel-header">
        <div class="ph-bar"></div>
        <div class="ph-text">
          <h2>DAG 管理</h2>
        </div>
      </div>
      <div class="stat-row" id="dagStats"></div>
      <div class="panel-body" id="dagsBody">
        <div class="empty-state">
          <div class="es-icon">D</div>
          <h3>暂无 DAG</h3>
          <p>创建 DAG 后将在此显示</p>
        </div>
      </div>
    </section>

    <!-- Tasks 页 -->
    <section id="page-tasks" class="page">
      <div class="panel-header">
        <div class="ph-bar"></div>
        <div class="ph-text">
          <h2>任务管理</h2>
        </div>
      </div>
      <div class="sub-tabs">
        <button class="sub-tab active" data-subtab="acks">任务工单</button>
        <button class="sub-tab" data-subtab="traces">执行追踪</button>
      </div>
      <div class="panel-body" id="tasksBody">
        <div class="empty-state">
          <div class="es-icon">T</div>
          <h3>暂无任务</h3>
          <p>创建任务后将在此显示</p>
        </div>
      </div>
    </section>

    <!-- Skills 页 -->
    <section id="page-skills" class="page">
      <div class="panel-header">
        <div class="ph-bar"></div>
        <div class="ph-text">
          <h2>技能管理</h2>
        </div>
      </div>
      <div class="panel-body" id="skillsBody">
        <div class="empty-state">
          <div class="es-icon">S</div>
          <h3>未找到 Skill</h3>
          <p>在 .agent/skills/ 目录创建 Skill</p>
        </div>
      </div>
    </section>

    <!-- Commands 页 -->
    <section id="page-commands" class="page">
      <div class="panel-header">
        <div class="ph-bar"></div>
        <div class="ph-text">
          <h2>命令卡 / 提示词</h2>
        </div>
      </div>
      <div class="split-panel" id="commandsBody">
        <div class="split-left">
          <div class="section-header">COMMANDS <span class="sh-count" id="cmdCount">0</span></div>
          <div class="panel-body" id="cmdCardsBody">
            <div class="empty-state">
              <div class="es-icon">C</div>
              <h3>暂无命令卡</h3>
              <p></p>
            </div>
          </div>
        </div>
        <div class="split-divider"></div>
        <div class="split-right">
          <div class="section-header">PROMPTS <span class="sh-count" id="promptCount">0</span></div>
          <div class="panel-body" id="promptsBody">
            <div class="empty-state">
              <div class="es-icon">P</div>
              <h3>暂无提示词</h3>
              <p></p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Memory 页 -->
    <section id="page-memory" class="page">
      <div class="panel-header">
        <div class="ph-bar"></div>
        <div class="ph-text">
          <h2>记忆库</h2>
          <p class="ph-sub" id="memCount">0 files</p>
        </div>
      </div>
      <div class="panel-body" id="memoryBody">
        <div class="empty-state">
          <div class="es-icon">M</div>
          <h3>记忆库为空</h3>
          <p>共享文件将在此显示</p>
        </div>
      </div>
    </section>

    <!-- Settings 页 -->
    <section id="page-settings" class="page">
      <div class="panel-header">
        <div class="ph-bar"></div>
        <div class="ph-text">
          <h2>设置</h2>
        </div>
      </div>
      <div class="panel-body">
        <div class="section-header">AGENT</div>
        <div class="data-card">
          <div class="dc-row">
            <div class="dc-left"><strong>自动启动</strong><span>启动时拉起全部 Agent</span></div><span
              class="badge badge-success">ON</span>
          </div>
        </div>
        <div class="data-card">
          <div class="dc-row">
            <div class="dc-left"><strong>日志级别</strong><span>控制输出详细程度</span></div><span class="dc-right-text">INFO</span>
          </div>
        </div>
        <div class="section-header">DATABASE</div>
        <div class="data-card">
          <div class="dc-row">
            <div class="dc-left"><strong>PostgreSQL</strong><span>主数据存储</span></div><span class="badge badge-success"
              id="dbStatus">未连接</span>
          </div>
        </div>
        <div class="section-header">ABOUT</div>
        <div class="data-card">
          <div class="dc-row">
            <div class="dc-left"><strong>Agent Orchestrator v2</strong><span>Wails WebKit · Go Backend</span></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- 放大遮罩 -->
  <div id="overlay" class="overlay hidden">
    <div id="overlayPane" class="overlay-pane"></div>
  </div>

  <script src="lib/xterm.min.js"></script>
  <script src="lib/xterm-addon-fit.min.js"></script>
  <script src="app.js"></script>
</body>

</html>